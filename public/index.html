<!doctype html>
<html ng-app='images'>
    <head>
        <title>Images4</title>
        <link rel="stylesheet" type="text/css" href="css/index.css"/>
        <!--<link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css"/>-->
        <!--<link rel="stylesheet" type="text/css" href="css/jquery.mobile.min.css"/>-->
        <script src="js/jquery.min.js"></script>
        <!--<script src="js/jquery.mobile.min.js"></script>-->
        <!--<script src="js/jquery-ui.min.js"></script>-->
        <script src="js/angular.min.js"></script>
        <!--<script src="js/ui-bootstrap-tpls.min.js"></script>-->
        <script src="js/angular-hotkeys.min.js"></script>
        <script src="js/angular-touch.min.js"></script>
        <script src="js/images.js"></script>
    </head>
    <body>
        <div ng-controller="Entry" ng-init="current = -1">
            <div class="title">
                <button ng-click="set_mode('tags')" />Tags</button>
                <button ng-click="set_mode('metadata')" />Metadata</button>
                <button ng-click="set_mode('physical')" />Physical</button>
                {{me.name}}/{{me.id}} :: {{message}}
            </div>
            <div class="tags" ng-show="tags_mode()">
                <div class="tag tag_{{have_tag(tag.id)}}"
                     style="background-color: {{tag.background_color}}; color: {{tag.foreground_color}};"
                     ng-repeat="tag in tag_feed.entries" 
                     ng-click="toggle_tag(tag.id)">
                    {{tag.id}}
                </div>
                <input style="width: 100%" ng-model="new_tag_id" ng-keypress="add_tag($event)"/>
            </div>
            <div class="metadata" ng-show="metadata_mode()">
            </div>
            <div class="metadata" ng-show="physical_mode()">
                <div class="warning" ng-show="current_is_deleted()">This entry will be deleted</div>
                <div class="info" ng-show="current_is_hidden()">This entry is hidden</div>
                <table>
                    <tr ng-repeat="(key, value) in get_current().physical_metadata">
                        <td>{{key}}</td><td>{{value}}</td>
                    </tr>
                </table>
            </div>
            <div
                id="proxy_holder"
                ng-if="have_current()"
                ng-swipe-left="next()"
                ng-swipe-right="previous()">
                <center>
                    <img
                        class="proxy"
                        ng-src="{{get_current_proxy_url()}}"/>
                </center>
            </div>
            <div id="entry_holder">
                <div 
                    class="entry {{get_filters($index, entry)}}"
                    style="background-image: url({{entry.thumb_url}})"
                    ng-click="view($index)"
                    ng-repeat="entry in feed.entries">    
                    <div class="tag blue">{{entry.taken_ts}}</div>
                    <div class="tag black">{{get_access(entry)}}{{entry.user_id}}</div>
                    <div
                        class="tag"
                        style="background-color: {{tag_background_color(tag)}}; color: {{tag_foreground_color(tag)}};"
                        ng-repeat="tag in entry.tags">
                        {{tag}}
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
